<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Time Banking ERP - Login</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="text-center p-5">
  <h1>‚è≥ Time Banking ERP</h1>
  <p class="lead">Sign up or log in below!</p>

  <div class="container mt-4">
    <h4>Sign Up</h4>
    <form id="signupForm" class="mb-4">
      <input type="text" id="signupName" placeholder="Name" required class="form-control mb-2">
      <input type="email" id="signupEmail" placeholder="Email" required class="form-control mb-2">
      <button class="btn btn-primary">Sign Up</button>
    </form>

    <h4>Log In</h4>
    <form id="loginForm">
      <input type="email" id="loginEmail" placeholder="Email" required class="form-control mb-2">
      <button class="btn btn-success">Log In</button>
    </form>
  </div>

  <script>
  document.getElementById('signupForm').addEventListener('submit', e => {
    e.preventDefault();
    fetch(`http://localhost:3000/api/user/register`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        name: document.getElementById('signupName').value,
        email: document.getElementById('signupEmail').value
      })
    })
    .then(res => res.json())
    .then(data => {
      alert(data.message);
      if (data.user) {
        window.location.href = `user_dashboard.html?userId=${data.user._id}`;
      }
    });
  });

  document.getElementById('loginForm').addEventListener('submit', e => {
    e.preventDefault();
    fetch(`http://localhost:3000/api/user/login`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        email: document.getElementById('loginEmail').value
      })
    })
    .then(res => res.json())
    .then(data => {
      if (data.user) {
        alert(data.message);
        window.location.href = `user_dashboard.html?userId=${data.user._id}`;
      } else {
        alert('Login failed: ' + data.message);
      }
    });
  });
  </script>
</body>
</html>
